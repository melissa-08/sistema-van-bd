<div [class]="containerClasses">
  <!-- Input -->
  <input
    *ngIf="type !== 'textarea'"
    [type]="type"
    [id]="id"
    [name]="name"
    [placeholder]="placeholder"
    [disabled]="disabled"
    [value]="value"
    (input)="onInput($event)"
    (focus)="onFocus()"
    (blur)="onBlur()"
    [class]="inputClasses"
    autocomplete="off"
  />

  <!-- Textarea -->
  <textarea
    *ngIf="type === 'textarea'"
    [id]="id"
    [name]="name"
    [placeholder]="placeholder"
    [disabled]="disabled"
    [value]="value"
    (input)="onInput($event)"
    (focus)="onFocus()"
    (blur)="onBlur()"
    [class]="inputClasses + ' resize-y min-h-[48px] overflow-hidden'" 
    rows="3"
  ></textarea>
  <!-- Note: design showed h-48px for textarea initially too? Or was it taller? Design 3:450 shows multiline. The container height grows? Frame 3:452 has h-auto? The text is long. -->
  
  <!-- Valid Icon (Green Check) -->
  <div *ngIf="state === 'valid' && !disabled" class="shrink-0 w-6 h-6 flex items-center justify-center">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
       <path d="M20 6L9 17L4 12" stroke="#31D0AA" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </div>

  <!-- Error Icon (Orange Exclamation) -->
  <div *ngIf="state === 'error' && !disabled" class="shrink-0 w-6 h-6 flex items-center justify-center">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="12" cy="12" r="10" stroke="#F66B0E" stroke-width="2"/>
      <path d="M12 8V12" stroke="#F66B0E" stroke-width="2" stroke-linecap="round"/>
      <path d="M12 16H12.01" stroke="#F66B0E" stroke-width="2" stroke-linecap="round"/>
    </svg>
  </div>

  <!-- Textarea Resize Handle -->
   <div *ngIf="type === 'textarea'" class="absolute bottom-[6px] right-[6px] pointer-events-none">
    <svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M8 2L2 8" stroke="#B1B1B1" stroke-width="1.5" stroke-linecap="round"/>
        <path d="M8 6L6 8" stroke="#B1B1B1" stroke-width="1.5" stroke-linecap="round"/>
    </svg>
   </div>
</div>
